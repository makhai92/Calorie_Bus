<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAQ</title>
    <link rel="stylesheet" href="css/headfooter.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="Semi_Project.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Italianno&display=swap" rel="stylesheet">
<style>
.inquery-content{
    padding: 50px 0;
    width: 1000px;
    margin: 0 auto;
}
.page-title{
    margin-bottom: 50px;
    text-align: center;
    font-size: 30px;
    font-weight: bolder;    
}
</style>
</head>
<th:block th:include="common/header"></th:block>
<body>
	
	<script src="/project/css/summernote/summernote-lite.css"></script>
	<script src="/project/css/summernote/lang/summernote-ko-KR.js"></script>

    <main class="inquery-content">
		<section class="section inquery-view-wrap">
			<div class="page-title">1 : 1 문의 상세보기</div>
			<table class="tbl inquery-view">
				<tr>
					<th style="width: 20%;">제목</th>
					<td style="width: 80%;" th:text="${i.inqueryTitle}"></td>
				</tr>
				<tr>
					<th style="width: 15%;">작성자</th>
					<td style="width: 35%;" th:text="${i.memberNo}">회원번호</td>
					<th style="width: 15%;">작성일</th>
					<td style="width: 35%;" th:text="${i.inqueryDate}">2024-01-01</td>
				</tr>
				<tr>
					<th>첨부파일</th>
					<td colspan="5">
					<th:block th:each="file : ${i.fileList}">
					<img src="/image/file.png" width="16px">
					<a th:href="@{/inquery/filedown(fileName=${file.fileName},filePath=${file.filePath})}" th:text="${file.fileName}"></a>
					</th:block>
					</td>
				</tr>
				<tr>
					<td class="left" colspan="6">
						<div class="inqueryContent" th:utext="${i.inqueryContent}"></div>
					</td>
				</tr>
				<tr th:if="${session.member != null && session.member.memberNo == i.memberNo}">
				<td colspan="6">
			<button class="btn-primary"
					th:onclick="inqueryUpdate([[${i.inqueryNo}]]);">수정</button>
			<button class="btn-secondary"
					th:onclick="inqueryDelete([[${i.inqueryNo}]]);">삭제</button>
				</td>
				</tr>
			</table>
			<!-- 댓글 입력 -->
			<div th:if="${session.member.member_level == 1}" class="inputCommentBox">
				<form action="/inquery/insertComment" method="post">
					<ul>
						<li><span class="material-icons">account_box</span></li>
						<li><input type="hidden" name="inqueryReplyWriter" th:value="${session.member.memberName}"> 
							<input type="hidden" name="inqueryRef" th:value="${i.inqueryNo}">
							<div class="input-item">
								<textarea name="inqueryReplyContent"></textarea>
							</div></li>
						<li>
							<button type="submit" class="btn-primary">등록</button>
						</li>
					</ul>
				</form>
			</div>
			<!-- 댓글 출력 -->
			<div class="commentBox">
				<th:block th:each="ir : ${i.replyList}">
					<ul class="posting-comment">
						<li><span class="material-icons">account_box</span></li>
						<li>
							<p class="comment-info">
								<span th:text="${ir.inqueryReplyWriter}"></span> <span th:text="${ir.inqueryReplyDate}"></span> 
							</p>
							<p class="comment-content" th:text="${ir.inqueryReplyContent}"></p>
							<div class="input-item" style="display: none;">
								<textarea name="inqueryReplyContent"
									th:text="${ir.inqueryReplyContent}"></textarea>
							</div>
							<p class="comment-link">

								<th:block th:if="${session.member != null}">
									<th:block
										th:if="${session.member.memberId == ir.inqueryReplyWriter}">
										<a href="javascript:void(0)"
											th:onclick="modifyReply(this,[[${ir.inqueryReplyNo}]],[[${i.inqueryNo}]]);">수정</a>
										<a href="javascript:void(0)"
											th:onclick="deleteReply(this,[[${ir.inqueryReplyNo}]],[[${i.inqueryNo}]]);">삭제</a>
									</th:block>
									<a href="javascript:void(0)" class="recShow">답글 달기</a>
								</th:block>
							</p>
						</li>
					</ul>
	</section>
	</main>
</body>
<th:block th:include="common/footer"></th:block>
</html>